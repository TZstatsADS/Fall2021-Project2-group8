hate.crime <- read_csv("../data/cases-by-day.csv")
# load packages
library("tidyverse")
hate.crime <- read_csv("../data/cases-by-day.csv")
hate.crime
# from 2/29/2020 to 6/30/2021
hate.crime <- read_csv("../data/NYPD_Hate_Crimes.csv")
covid <- read_csv("../data/cases-by-day.csv")
complaint <- read_csv("../data/NYPD_Complaint_Map__Year_to_Date_.csv")
shoot.his <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
# from 2/29/2020 to 6/30/2021
hate.crime <- read_csv("../data/NYPD_Hate_Crimes.csv")
covid <- read_csv("../data/cases-by-day.csv")
complaint <- read_csv("../data/NYPD_Complaint_Map__Year_to_Date_.csv")
shoot.his <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
hate.crime
complaint
covid
# from 2/29/2020 to 6/30/2021
plot(covid$CASE_COUNT, covid$date_of_interest)
?plot
# from 2/29/2020 to 6/30/2021
plot(covid$date_of_interest, covid$CASE_COUNT)
covid_temp <- covid %>% select(data_of_interest, CASE_COUNT)
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT)
covid_temp
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT) %>%
na.omit()
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT)
View(covid_temp)
plot(covid$case_count)
plot(covid$CASE_COUNT)
plot(covid$CASE_COUNT, type = "l")
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT, type = "l")
covid_temp$data_of_interest <- as.date(covid_temp$data_of_interest)
covid_temp$data_of_interest <- as.Date(covid_temp$data_of_interest)
covid_temp$data_of_interest <- as.Date(covid_temp$date_of_interest)
?as.Date
covid_temp$data_of_interest <- as.Date(covid_temp$date_of_interest,
"%m/%d/%y")
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT, type = "l")
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT) %>%
na.omit()
covid_temp$date_of_interest <- as.Date(covid_temp$date_of_interest,
"%m/%d/%y")
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT, type = "l")
covid_temp$date_of_interest <- as.Date(covid_temp$date_of_interest,
"%y/%m/%d")
covid_temp$date_of_interest
covid
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT) %>%
na.omit()
covid_temp$date_of_interest <- as.Date(covid_temp$date_of_interest,
"%m-%d-%y")
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT, type = "l")
covid_temp
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT) %>%
na.omit()
covid_temp
covid_temp$date_of_interest <- as.Date(covid_temp$date_of_interest,
"%m/%d/%y")
View(covid_temp)
covid_temp <- covid %>% select(date_of_interest, CASE_COUNT) %>%
na.omit()
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date_of_interest, covid_temp$CASE_COUNT, type = "l")
# from 2/29/2020 to 6/30/2021
plot(1:589, covid_temp$CASE_COUNT, type = "l")
hate.crime
View(hate.crime)
covid_temp <- covid %>% select(date = date_of_interest, case = CASE_COUNT) %>%
na.omit()
# from 2/29/2020 to 6/30/2021
plot(1:589, covid_temp$case, type = "l")
covid_temp$date_of_interest <- as.Date(covid_temp$date_of_interest)
covid_temp$date <- as.Date(covid_temp$date)
hate.crime_temp <- hate_crime %>% select(date = `Record Create Date`)
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`)
View(hate.crime)
View(hate.crime)
View(shoot.cur)
View(complaint)
library("lubridate")
packages.used=c("tidyverse", "lubridate")
covid_temp$date <- as_date(covid_temp$date)
covid_temp <- covid %>% select(date = date_of_interest, case = CASE_COUNT) %>%
na.omit()
covid_temp
?as_date
sub('\\\', '_', covid_temp[1]$date)
covid_temp$date <- as_date(covid_temp$date)
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`, )
# from 2/29/2020 to 6/30/2021
plot(1:589, covid_temp$case, type = "l")
sub('\\', '_', covid_temp[1]$date)
sub('\/', '_', covid_temp[1]$date)
sub('\\/', '-', covid_temp[1]$date)
sub('\\/', '-', covid_temp$date[1])
covid_temp$date[1]
covid_temp <- covid %>% select(date = date_of_interest, case = CASE_COUNT) %>%
na.omit()
covid_temp$date[1]
sub('\\/', '-', covid_temp$date[1])
sub('\\/', '-', covid_temp$date[1])
sub('\\/', '-', covid_temp$date[1])
covid_temp$date <- sub('\\/', '-', covid_temp$date)
covid_temp
covid_temp$date <- sub('\\/', '-', covid_temp$date)
covid_temp
covid_temp$date <- as_date(covid_temp$date)
#covid_temp$date <- sub('\\/', '-', covid_temp$date)
#covid_temp$date <- sub('\\/', '-', covid_temp$date)
covid_temp$date <- as_date(covid_temp$date, format = '%m/%d/%Y')
covid_temp
covid_temp <- covid %>% select(date = date_of_interest, case = CASE_COUNT) %>%
na.omit()
#covid_temp$date <- sub('\\/', '-', covid_temp$date)
#covid_temp$date <- sub('\\/', '-', covid_temp$date)
covid_temp$date <- as_date(covid_temp$date, format = '%m/%d/%Y')
covid_temp
# from 2/29/2020 to 6/30/2021
plot(1:589, covid_temp$case, type = "l")
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date, covid_temp$case, type = "l")
hate.crime
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count()
hate.crime_temp
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y'))
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y'))
hate.crime_temp
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y')) %>%
filter(date >= "2021-02-29")
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y')) %>%
filter(date > "2021-02-29")
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y')) %>%
filter(date >= as_date("2021-02-29"))
View(covid)
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y')) %>%
filter(date >= as_date("2021-02-29"))
hate.crimr_temp
hate.crime_temp
as_date("2021-02-29")
hate.crime_temp <- hate.crime %>% select(date = `Record Create Date`) %>%
group_by(date) %>% count() %>%
mutate(date = as_date(date, format = '%m/%d/%Y')) %>%
filter(date >= ymd("2021-02-29"))
ymd("2021-02-29")
?ymd
ymd("2016-01-01")
class(ymd("2016-01-01"))
ymd("2016-01-01") < ymd("2016-02-01")
View(covid)
View(covid)
View(complaint)
# Read the raw data
covid <- read_csv("../data/cases-by-day.csv")
shoot.his <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
packages.used=c("tidyverse", "lubridate")
# check packages that need to be installed.
packages.needed=setdiff(packages.used,
intersect(installed.packages()[,1],
packages.used))
# install additional packages
if(length(packages.needed)>0){
install.packages(packages.needed, dependencies = TRUE)
}
# load packages
library("tidyverse")
library("lubridate")
covid <- read_csv("../data/cases-by-day.csv")
shoot.his <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
shoot.his
# Read the raw data
covid <- read_csv("../data/cases-by-day.csv")
covid
covid <- covid %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT) %>%
na.omit()
covid
covid$date <- as_date(covid_temp$date, format = '%m/%d/%Y')
covid$date <- as_date(covid$date, format = '%m/%d/%Y')
covid
as_date("2021-6-30")
typeof(as_date("2021-6-30"))
as_date("2021-6-30") - covid$date[1]
as_date("2021-6-30") - covid$date[1] > 0
as_date("2021-6-30") > covid$date[1]
# Read the raw data
covid_raw <- read_csv("../data/cases-by-day.csv")
shoot.his_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
# Choose the columns for analysis
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT) %>%
na.omit()
covid_raw <- read_csv("../data/cases-by-day.csv")
shoot.his_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
covid$date <- as_date(covid$date, format = '%m/%d/%Y')
covid$date
covid
tail(covid)
covid
?filter
as_date("2021-6-30")
date <= as_date("2021-06-30")
covid$date <= as_date("2021-06-30")
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT) %>%
filter(date <= as_date("2021-06-30")) %>%
na.omit()
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT) %>%
mutate(date = as_date(date))
filter(date <= as_date("2021-06-30")) %>%
na.omit()
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT) %>%
mutate(date = as_date(date)) %>%
filter(date <= as_date("2021-06-30")) %>%
na.omit()
# Select the rows
covid$date <- as_date(covid$date, format = '%m/%d/%Y')
covid <- covid %>% filter(date < as_date("2021-6-30"))
covid
covid_raw <- read_csv("../data/cases-by-day.csv")
shoot.his_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
# Choose the columns
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT)
# Select the rows
covid$date <- as_date(covid$date, format = '%m/%d/%Y')
covid
covid_temp <- covid %>% filter(date <= as_date("2021-06-30"))
covid_temp
covid <- covid %>% filter(date <= as_date("2021-06-30"))
covid
tail(covid)
# from 2/29/2020 to 6/30/2021
plot(covid_temp$date, covid_temp$case, type = "l")
head(covid)
(1 == 1) & (1==2)
### Clean the Shooting crime data
shoot_raw <- rbind(shoot.cur_raw, shoot.his_raw)
shoot.cur_raw
shoot.his_raw
View(shoot.cur_raw)
write.csv("../output/covid_data.csv")
write.csv(covid, "../output/covid_data.csv")
### Clean the Shooting crime data
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longtitude = Longtitude,
new_georef = `New Georeferenced Column`)
### Clean the Shooting crime data
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
new_georef = `New Georeferenced Column`)
shoot.cur
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
new_georef = `New Georeferenced Column`)
shoot.his <- shoot.his_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
new_georef = `New Georeferenced Column`)
shoot.his_raw
View(shoot.his_raw)
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = `New Georeferenced Column`)
shoot.his <- shoot.his_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = lon_lat)
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = `New Georeferenced Column`)
shoot.his <- shoot.his_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = Lon_Lat)
shoot <- rbind(shoot.cur, shoot.his)
shoot
shoot$date <- as_date(shoot$date, format = '%m/%d/%Y')
shoot
shoot <- rbind(shoot.cur, shoot.his) %>% na.omit()
shoot
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter((date >= as_date("2021-02-29")) & (date <= as_date("2021-06-30"))
a
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter((date >= as_date("2021-02-29")) & (date <= as_date("2021-06-30")))
# Combine historical and current data
shoot <- rbind(shoot.cur, shoot.his) %>% na.omit()
shoot$date <- as_date(shoot$date, format = '%m/%d/%Y')
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter((date >= as_date("2021-02-29")) & (date <= as_date("2021-06-30")))
# Combine historical and current data
shoot <- rbind(shoot.cur, shoot.his) %>% na.omit()
shoot$date <- as_date(shoot$date, format = '%m/%d/%Y')
shoot$date
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter(date <= as_date("2021-06-30")) %>%
filter(date >= as_date("2021-02-29"))
shoot <- shoot %>% filter(date <= as_date("2021-06-30"))
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter(date <= as_date("2021-06-30")) %>%
filter(date >= as_date("2020-02-29"))
# Combine historical and current data
shoot <- rbind(shoot.cur, shoot.his) %>% na.omit()
shoot$date <- as_date(shoot$date, format = '%m/%d/%Y')
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter(date <= as_date("2021-06-30")) %>%
filter(date >= as_date("2020-02-29"))
shoot
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter(date <= as_date("2021-06-30")) %>%
filter(date >= as_date("2020-02-29")) %>% arrange(date)
shoot
View(shoot)
covid
View(covid)
packages.used=c("tidyverse", "lubridate")
# check packages that need to be installed.
packages.needed=setdiff(packages.used,
intersect(installed.packages()[,1],
packages.used))
# install additional packages
if(length(packages.needed)>0){
install.packages(packages.needed, dependencies = TRUE)
}
# load packages
library("tidyverse")
library("lubridate")
# Read the raw data
covid_raw <- read_csv("../data/cases-by-day.csv")
shoot.his_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Historic_.csv")
shoot.cur_raw <- read_csv("../data/NYPD_Shooting_Incident_Data__Year_To_Date_.csv")
### Clean the COVID data
# Choose the columns
covid <- covid_raw %>% select(date = date_of_interest, case = CASE_COUNT,
bk = BK_CASE_COUNT, bx = BX_CASE_COUNT,
mn = MN_CASE_COUNT, qn = QN_CASE_COUNT,
si = SI_CASE_COUNT)
# Select the rows from 2020-2-29 to 2021-6-30
covid$date <- as_date(covid$date, format = '%m/%d/%Y')
covid <- covid %>% filter(date <= as_date("2021-06-30"))
rm(covid_raw)
covid
covid_raw
### Clean the Shooting crime data
# Select the columns
shoot.cur <- shoot.cur_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = `New Georeferenced Column`)
shoot.his <- shoot.his_raw %>%
select(date = OCCUR_DATE, boro = BORO,
x_cood = X_COORD_CD, y_cood = Y_COORD_CD,
latitude = Latitude, longitude = Longitude,
lon_lat = Lon_Lat)
# Combine historical and current data
shoot <- rbind(shoot.cur, shoot.his) %>% na.omit()
shoot$date <- as_date(shoot$date, format = '%m/%d/%Y')
# Select the rows from 2020-2-29 to 2021-6-30
shoot <- shoot %>% filter(date <= as_date("2021-06-30")) %>%
filter(date >= as_date("2020-02-29")) %>% arrange(date)
rm(shoot_cur, shoot.his, shoot.his_raw, shoot.cur_raw)
rm(shoot.cur, shoot.his, shoot.his_raw, shoot.cur_raw)
shoot.cur
shoot
